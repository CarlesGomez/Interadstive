PRAGMA foreign_keys=ON;
CREATE TABLE IF NOT EXISTS clothes (id VARCHAR(60), name VARCHAR(100), url VARCHAR(500), PRIMARY KEY (id));
INSERT INTO clothes VALUES('clo_1', 'Trousers', 'http://sompartyapp.com/smart_ads/img/clothes/trousers.png');
INSERT INTO clothes VALUES('clo_2', 'Shirts', 'http://sompartyapp.com/smart_ads/img/clothes/shirts.png');
INSERT INTO clothes VALUES('clo_3', 'T-shirts', 'http://sompartyapp.com/smart_ads/img/clothes/tshirts.png');
INSERT INTO clothes VALUES('clo_4', 'Skirts', 'http://sompartyapp.com/smart_ads/img/clothes/skirts.png');
INSERT INTO clothes VALUES('clo_5', 'Shoes', 'http://sompartyapp.com/smart_ads/img/clothes/shoes.png');
CREATE TABLE IF NOT EXISTS brands (id VARCHAR(60), name VARCHAR(100), url VARCHAR(500), PRIMARY KEY (id));
INSERT INTO brands VALUES('bra_1', 'Nike', 'http://sompartyapp.com/smart_ads/img/brands/nike.jpg');
INSERT INTO brands VALUES('bra_2', 'Levi''s', 'http://sompartyapp.com/smart_ads/img/brands/levis.jpg');
INSERT INTO brands VALUES('bra_3', 'Lacoste', 'http://sompartyapp.com/smart_ads/img/brands/lacoste.jpg');
INSERT INTO brands VALUES('bra_4', 'Dolce & Gabbana', 'http://sompartyapp.com/smart_ads/img/brands/dyg.jpg');
INSERT INTO brands VALUES('bra_5', 'Adidas', 'http://sompartyapp.com/smart_ads/img/brands/adidas.png');
INSERT INTO brands VALUES('bra_6', 'Puma', 'http://sompartyapp.com/smart_ads/img/brands/puma.jpg');
INSERT INTO brands VALUES('bra_7', 'Billabong', 'http://sompartyapp.com/smart_ads/img/brands/billabong.jpg');
CREATE TABLE IF NOT EXISTS styles (id VARCHAR(60), name VARCHAR(100), url VARCHAR(500), PRIMARY KEY (id));
INSERT INTO styles VALUES('sty_1', 'Hipster', 'http://sompartyapp.com/smart_ads/img/styles/hipster.jpg');
INSERT INTO styles VALUES('sty_2', 'Punk', 'http://sompartyapp.com/smart_ads/img/styles/punk.jpg');
INSERT INTO styles VALUES('sty_3', 'Chic', 'http://sompartyapp.com/smart_ads/img/styles/chic.jpg');
INSERT INTO styles VALUES('sty_4', 'Hip hop', 'http://sompartyapp.com/smart_ads/img/styles/hiphop.jpg');
CREATE TABLE IF NOT EXISTS places (id VARCHAR(60), name VARCHAR(100), url VARCHAR(500), PRIMARY KEY (id));
INSERT INTO places VALUES('1', 'SmartAds', 'http://sompartyapp.com/smart_ads/img/store.jpg');
INSERT INTO places VALUES('2', 'FutureHacks Madrid', 'http://sompartyapp.com/smart_ads/img/futurehacks.png');
CREATE TABLE IF NOT EXISTS zones (id VARCHAR(60), name VARCHAR(100), url VARCHAR(500), place_id VARCHAR(60), PRIMARY KEY (id), FOREIGN KEY (place_id) REFERENCES places (id));
INSERT INTO zones VALUES('1', 'Window display', 'http://sompartyapp.com/smart_ads/img/windowdisplay.jpg', '1');
INSERT INTO zones VALUES('2', 'Selling desk', 'http://sompartyapp.com/smart_ads/img/sellingdesk.jpg', '2');
CREATE TABLE IF NOT EXISTS bluetooth_dev (id VARCHAR(60), mac VARCHAR(60), rank VARCHAR(60), minor VARCHAR(60), major VARCHAR(60), proximity_uuid VARCHAR(60), zone_id VARCHAR(60), PRIMARY KEY (id), FOREIGN KEY (zone_id) REFERENCES zones(id));
INSERT INTO bluetooth_dev VALUES('1', 'CD:2F:32:88:F2:FF', '0', '12936', '62207', 'B9407F30-F5F8-466E-AFF9-25556B57FE6D', '1');
INSERT INTO bluetooth_dev VALUES('2', 'D9:30:87:28:8A:6F', '0', '34600', '35439', 'B9407F30-F5F8-466E-AFF9-25556B57FE6D', '2');
CREATE TABLE IF NOT EXISTS offers (id VARCHAR(60), brand_id VARCHAR(60), clothes_id VARCHAR(60), style_id VARCHAR(60), discount INTEGER, gender VARCHAR(20), minage INTEGER, maxage INTEGER, url VARCHAR(500), bluetooth_id VARCHAR(60), creation_time DATETIME, PRIMARY KEY (id), FOREIGN KEY (brand_id) REFERENCES brands (id), FOREIGN KEY (clothes_id) REFERENCES clothes (id), FOREIGN KEY (style_id) REFERENCES styles (id), FOREIGN KEY (bluetooth_id) REFERENCES bluetooth_dev (id));
CREATE TABLE IF NOT EXISTS users (id VARCHAR(60), firstname VARCHAR(200), secondname VARCHAR(200), age VARCHAR(20), person_link VARCHAR(500), photo_url VARCHAR(500), interest VARCHAR(20), gender VARCHAR(20), email VARCHAR(100), last_connection DATETIME,  PRIMARY KEY (id));
CREATE TABLE IF NOT EXISTS tracked_path (user_id VARCHAR(60), bluetooth_id VARCHAR(60), state VARCHAR(20), hour DATETIME, PRIMARY KEY (user_id, bluetooth_id, state), FOREIGN KEY (user_id) REFERENCES users (id), FOREIGN KEY (bluetooth_id) REFERENCES bluetooth_dev (id));
CREATE TABLE IF NOT EXISTS user_likes (user_id VARCHAR(60), related_like VARCHAR(60), PRIMARY KEY (user_id, related_like), FOREIGN KEY (user_id) REFERENCES users (id));
CREATE TABLE IF NOT EXISTS received_offers (user_id VARCHAR(60), offer_id VARCHAR(60), state VARCHAR(20), timestamp DATETIME NULL, PRIMARY KEY (user_id, offer_id, state), FOREIGN KEY (user_id) REFERENCES users (id), FOREIGN KEY (offer_id) REFERENCES offers (id));